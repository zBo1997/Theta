# Theta
 
 - **一款数据库实现的分布式 Sequence：**   
这个小组件的小巧，精炼，不同于中间件，因为这个组件不仅仅是基于MySQL
实现的一款分布式序列号生成组件，你还可以通过ORACLE、DB2 (目前仅有)来实现，
 您可以通过Spring中的.yml文件自定义你的序列号生成方法，再通过sharding-jdbc,
这分布式的分库、分表的工具进行插入你理想的Primary，当然我的目的是做到尽可能的
方便用户扩展，详细后面有会讲到他的使用方法。

 - **关于Theta的构思：**  
  首先想到的是使用MySQL基于，MVVC支持的Innodb引擎来维护每次序列号生成的顺序，防止出现重复的
主键。同时我们还需要使用到数据库的事务，当然这也是为了防止出现多个线程，同时操作数据库，每条线程
使用了重复的序列号。也就是说，每当我们需要生成一个序列号的时候，Theta会帮助我们去调度事务，
去给用户当前使用的唯一序列号进行自增，（目前1.0.0的问题如果当前序列号大于了最大时间,Theta
会帮助我们重置最最大个数的,于此同时为了防止出现问题我们还会判断此时的更新时间，判断当前
的序列号配置是否再之前被其他线程重置过，当然这个方法不是一个最终的解决办法，我最终可能会按照Leaf
的双Buffer实现方式继续优化）



| 序列号配置唯一标识 | 当前序列号 | 最大个数  | 时间  | 更新时间 |
|:---------:|-------|-------|-----|------|
|     1     | 200   | 9999999 | 2021-12-22 23:59:59 |  2021-12-22 23:59:59 |
|     2     | 100   | 9999999 | 2021-01-22 21:00:59 |  2021-12-22 23:59:59 |
|     3     | 502   | 9999999 | 1997-12-23 12:00:00 |  2021-12-22 23:59:59 |

```flow
st=>start: 开始框
op=>operation: 处理框
cond=>condition: 判断框(是或否?)
sub1=>subroutine: 子流程
io=>inputoutput: 输入输出框
e=>end: 结束框
st->op->cond
cond(yes)->io->e
cond(no)->sub1(right)->op
```